{* Рекурсивная функция вывода дерева категорий *}{function name=comments_tree}<div class="list-comments row-{$row}">    {if $comments}        {foreach key=key item=c from=$comments}            {* Показываем только видимые категории *}            {if $c->id && $c->user_id}                <div class="media media-{$c->id}">                    <div class="media-left">                        <a href="/profile/{$c->user_id}">                            <img src="{$config->profile_users_images_dir}{$c->user_id}/{$c->image}" class="img-sm img-circle" alt="">                        </a>                    </div>                    <div class="media-body">                        <div class="media-heading">                            <a href="#" class="text-semibold">{$c->username} {$c->surname}</a>                            <span class="media-annotation dotted">{$c->date}</span>                        </div>                        <p>{$c->text}</p>                        {if $level<2}                        <ul class="list-inline list-inline-separate text-size-small">                            {*   <li>70 <a href="#"><i class="icon-arrow-up22 text-success"></i></a><a href="#"><i                                              class="icon-arrow-down22 text-danger"></i></a></li>*}                              <li><a class="recomment" href="/topic/{$topic->id}#comment-{$c->id}" data-type="1" data-id="{$c->id}" data-author="{$c->username} {$c->surname}">Коментувати</a></li>                              <li><a href="#" data-type="2" data-id="{$c->id}">Редагувати</a></li>                          </ul>                        {else}                            <ul class="list-inline list-inline-separate text-size-small">                                {*   <li>70 <a href="#"><i class="icon-arrow-up22 text-success"></i></a><a href="#"><i                                                  class="icon-arrow-down22 text-danger"></i></a></li>*}                                <li><a class="recomment" href="/topic/{$topic->id}#comment-{$c->id}" data-type="1" data-id="{$c->parent_id}" data-author="{$c->username} {$c->surname}">Коментувати</a></li>                                <li><a href="#" data-type="2" data-id="{$c->id}">Редагувати</a></li>                            </ul>                        {/if}                            {comments_tree comments=$c->sub_coments count=($c->sub_coments|count)-1 level=2 row=$c->id}                        {if $level<2}                            <div class="media media-hiden form-new-comment">                                <div class="media-left">                                    <a href="/profile/{$c->user_id}">                                        <img src="{$config->profile_users_images_dir}{$c->user_id}/{$c->image}" class="img-sm img-circle" alt="">                                    </a>                                </div>                                <div class="media-body">                                    <form class="form-comment text-right">                                        <input type="hidden" name="session_id" value="{$smarty.session.id}">                                        <input type="hidden" name="parent_id" value="{$c->id}" id="parent_id">                                        <input type="hidden" name="type" value="{$topic->id}">                                        <a name="comment-{$c->id}"></a>                                        <textarea class="form-control content-group send-text" name="text" placeholder="Залишити коментар"></textarea>                                        <button type="submit" class="btn bg-success btn-labeled-right"><b><i class="icon-circle-right2"></i></b></button>                                        <button type="button" class="btn bg-success btn-labeled-right"><b><i class="icon-plus22"></i></b></button>                                    </form>                                </div>                            </div>                        {/if}                    </div>                </div>            {/if}        {/foreach}    {/if}</div>{/function}<div class="media date-step content-divider text-muted">    <span>Saturday, Feb 12</span></div>{comments_tree comments=$comments count=0 level=1 row=0}<div class="media">    <h6 class="text-semibold"><i class="icon-pencil7 position-left"></i> Коментування</h6>    <div class="media-left">        <img src="{$config->profile_users_images_dir}{$user->id}/{$user->image}" class="img-sm img-circle" alt="">    </div>    <div class="media-body">        <a name="comments"></a>        <form class="form-comment text-right">            <input type="hidden" name="session_id" value="{$smarty.session.id}">            <input type="hidden" name="parent_id" value="0" id="parent_id">            <input type="hidden" name="type" value="{$topic->id}">            <textarea class="form-control content-group" placeholder="Ваш коментар" name="text" style="width: 90%;"></textarea>            <button type="submit" class="btn bg-success btn-labeled-right"><b><i class="icon-circle-right2"></i></b></button>            <button type="button" class="btn bg-success btn-labeled-right"><b><i class="icon-plus22"></i></b></button>        </form>    </div></div><style>    .media-hiden {        display: none;    }    .list-comments {        max-height: 500px;        overflow-y: scroll;    }    .form-comment textarea{        height: 74px;        width: 87%;        float: left;    }    .form-comment button{        margin-bottom: 5px;    }    .list-comments .list-comments{        max-height: 300px;        overflow-y: scroll;    }</style>