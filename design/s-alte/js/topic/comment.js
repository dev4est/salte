$(window ).load(function(){    $('.recomment').click(function() {        var author = $(this).data('author');        var id = $(this).data('id');        var form_send = $(this).parents(".media-"+id).find(".media-hiden");        form_send.find("input[name='parent_id']").val(id);        form_send.find(".send-text").val(author+', ');        form_send.find("input[name='action']").val('add');        form_send.show();       // tinymce.activeEditor.setContent(author+", ");        $(".row-"+id).scrollTop($(".row-"+id).get(0).scrollHeight);        return false;    });    /**     * @var id     */    $('.delcomment').click(function () {        var id = $(this).data('id');        var parent_id = $(this).data('parent_id');        var session = $(this).data('session');        $.ajax({            url: "/comment/delete",            data: {id:id, parent_id:parent_id, session_id:session},            dataType: 'json',            success: function(data){                $(".media-"+id).remove();            }        });       return false;    });    $('.editcomment').click(function() {        var author = $(this).data('author');        var id = $(this).data('id');        var parent_id = $(this).data('parent_id');        var text = $("#text-"+id).html();        var form_send = $("#comment-"+parent_id);        form_send.find("input[name='action']").val('update');        form_send.find("input[name='parent_id']").val(id);        form_send.find(".send-text").val(text);        form_send.show();        // tinymce.activeEditor.setContent(author+", ");        $(".row-"+id).scrollTop($(".row-"+id).get(0).scrollHeight);        return false;    });   // tinymce.activeEditor.setContent('Форма для коментування');});$(".form-comment").submit(function () {    var data = $(this).serialize();    var parent = $(this).find("input[name='parent_id']").val();    var action = $(this).find("input[name='action']").val();    var text = $(this).find("textarea[name='text']").val();    console.log(data);    $.ajax({        url: "/comment/"+action,        data: data,        dataType: 'json',        success: function(data){            if(action=='add')            {                $(".row-"+parent).append(data);                $(".row-"+parent).scrollTop($(".row-"+parent).get(0).scrollHeight);            }            else if(action=='update')            {                $("#text-"+parent).html('').html(text);            }        }    });    $("#text-"+parent).html('').html(text);    $(this).find(".send-text").val('');   return false;});$(".list-comments").scrollTop($(".list-comments").get(0).scrollHeight);