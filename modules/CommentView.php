<?php/** * Created by PhpStorm. * User: user * Date: 24.05.18 * Time: 23:33 */require_once('View.php');class CommentView extends View{    public function addAction()    {        $this->design->assign('wrapper', 'ajax.tpl');        if(!$this->request->check_session())           exit();        $parent_id = $this->request->get('parent_id');        $topic_id = $this->request->get('type');        $text = $this->request->get('text');        if(empty($text) || empty($topic_id) || empty($this->user->id))          return false;        $model_comment = $this->communitys->Comment();        $id = $model_comment->add_comment(['parent_id'=>$parent_id, 'user_id'=>$this->user->id, 'topic_id'=>$topic_id, 'text'=>$text]);        $comment = $model_comment->get_comment($id);        $this->design->assign('comment', $comment);        $result = $this->design->fetch('comment/item.tpl');        return $this->ajax->result_json($result);    }}